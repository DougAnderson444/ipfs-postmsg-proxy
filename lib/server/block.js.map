{"version":3,"sources":["../../src/server/block.js"],"names":["getIpfs","opts","put","args","cid","pre","block","blockToJson","get","stat"],"mappings":";;;;;;kBAMe,UAAUA,OAAV,EAAmBC,IAAnB,EAAyB;AACtC,SAAO;AACLC,SAAK,wBAAO,gBAAP,EAAyB,kBAC5B,+BAAkB,CAAlB,CAD4B,EAE5B,6BAAiB,CAAjB,CAF4B,EAG5B,YAAa;AAAA,wCAATC,IAAS;AAATA,YAAS;AAAA;;AACX,UAAIA,KAAK,CAAL,KAAWA,KAAK,CAAL,EAAQC,GAAvB,EAA4B;AAC1BD,aAAK,CAAL,EAAQC,GAAR,GAAc,sBAAYD,KAAK,CAAL,EAAQC,GAApB,CAAd;AACD;;AAED,aAAOD,IAAP;AACD,KAT2B,EAU5BF,KAAKI,GAAL,CAAS,WAAT,CAV4B,EAW5B,mBACE;AAAA;;AAAA,aAAa,4BAAUC,KAAV,EAAgBJ,GAAhB,iCAAb;AAAA,KADF,EAEEK,kBAFF,CAX4B,CAAzB,EAeFN,IAfE,CADA;AAiBLO,SAAK,wBAAO,gBAAP,EAAyB,kBAC5B,+BAAkB,CAAlB,CAD4B,EAE5B,yBAAe,CAAf,CAF4B,EAG5BP,KAAKI,GAAL,CAAS,WAAT,CAH4B,EAI5B,mBACE;AAAA;;AAAA,aAAa,6BAAUC,KAAV,EAAgBE,GAAhB,kCAAb;AAAA,KADF,EAEED,kBAFF,CAJ4B,CAAzB,EAQFN,IARE,CAjBA;AA0BLQ,UAAM,wBAAO,iBAAP,EAA0B,kBAC9B,+BAAkB,CAAlB,CAD8B,EAE9B,yBAAe,CAAf,CAF8B,EAG9BR,KAAKI,GAAL,CAAS,YAAT,CAH8B,EAI9B;AAAA;;AAAA,aAAa,6BAAUC,KAAV,EAAgBG,IAAhB,kCAAb;AAAA,KAJ8B,CAA1B,EAKHR,IALG;AA1BD,GAAP;AAiCD,C;;AAxCD;;AACA;;AACA;;AACA;;AACA","file":"block.js","sourcesContent":["import { expose } from 'postmsg-rpc'\r\nimport { pre, post } from 'prepost'\r\nimport { blockToJson, preBlockFromJson } from '../serialization/block'\r\nimport { preCidFromJson, cidFromJson } from '../serialization/cid'\r\nimport { preBufferFromJson } from '../serialization/buffer'\r\n\r\nexport default function (getIpfs, opts) {\r\n  return {\r\n    put: expose('ipfs.block.put', pre(\r\n      preBufferFromJson(0),\r\n      preBlockFromJson(0),\r\n      (...args) => {\r\n        if (args[1] && args[1].cid) {\r\n          args[1].cid = cidFromJson(args[1].cid)\r\n        }\r\n\r\n        return args\r\n      },\r\n      opts.pre('block.put'),\r\n      post(\r\n        (...args) => getIpfs().block.put(...args),\r\n        blockToJson\r\n      )\r\n    ), opts),\r\n    get: expose('ipfs.block.get', pre(\r\n      preBufferFromJson(0),\r\n      preCidFromJson(0),\r\n      opts.pre('block.get'),\r\n      post(\r\n        (...args) => getIpfs().block.get(...args),\r\n        blockToJson\r\n      )\r\n    ), opts),\r\n    stat: expose('ipfs.block.stat', pre(\r\n      preBufferFromJson(0),\r\n      preCidFromJson(0),\r\n      opts.pre('block.stat'),\r\n      (...args) => getIpfs().block.stat(...args)\r\n    ), opts)\r\n  }\r\n}\r\n"]}