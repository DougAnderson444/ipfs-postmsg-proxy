{"version":3,"sources":["../../src/server/bitswap.js"],"names":["getIpfs","opts","ledger","bitswap","reprovide","stat","stats","blocksReceived","dataReceived","blocksSent","dataSent","dupBlksReceived","dupDataReceived","unwant","wantlist"],"mappings":";;;;;;kBAIe,UAAUA,OAAV,EAAmBC,IAAnB,EAAyB;AACtC,SAAO;AACLC,YAAQ,wBAAO,qBAAP,EAA8B;AAAA;;AAAA,aAAa,8BAAUC,OAAV,EAAkBD,MAAlB,mCAAb;AAAA,KAA9B,EAA8ED,IAA9E,CADH;AAELG,eAAW,wBAAO,wBAAP,EAAiC;AAAA;;AAAA,aAAa,+BAAUD,OAAV,EAAkBC,SAAlB,oCAAb;AAAA,KAAjC,EAAoFH,IAApF,CAFN;AAGLI,UAAM,wBAAO,mBAAP,EAA4B,mBAChC;AAAA;;AAAA,aAAa,+BAAUF,OAAV,EAAkBE,IAAlB,oCAAb;AAAA,KADgC,EAEhC,UAACC,KAAD,EAAW;AACT,UAAIA,KAAJ,EAAW;AACT,YAAI,gBAAMA,MAAMC,cAAZ,CAAJ,EAAiC;AAC/BD,gBAAMC,cAAN,GAAuB,oBAAUD,MAAMC,cAAhB,CAAvB;AACD;;AAED,YAAI,gBAAMD,MAAME,YAAZ,CAAJ,EAA+B;AAC7BF,gBAAME,YAAN,GAAqB,oBAAUF,MAAME,YAAhB,CAArB;AACD;;AAED,YAAI,gBAAMF,MAAMG,UAAZ,CAAJ,EAA6B;AAC3BH,gBAAMG,UAAN,GAAmB,oBAAUH,MAAMG,UAAhB,CAAnB;AACD;;AAED,YAAI,gBAAMH,MAAMI,QAAZ,CAAJ,EAA2B;AACzBJ,gBAAMI,QAAN,GAAiB,oBAAUJ,MAAMI,QAAhB,CAAjB;AACD;;AAED,YAAI,gBAAMJ,MAAMK,eAAZ,CAAJ,EAAkC;AAChCL,gBAAMK,eAAN,GAAwB,oBAAUL,MAAMK,eAAhB,CAAxB;AACD;;AAED,YAAI,gBAAML,MAAMM,eAAZ,CAAJ,EAAkC;AAChCN,gBAAMM,eAAN,GAAwB,oBAAUN,MAAMM,eAAhB,CAAxB;AACD;AACF;;AAED,aAAON,KAAP;AACD,KA9B+B,CAA5B,EA+BHL,IA/BG,CAHD;AAmCLY,YAAQ,wBAAO,qBAAP,EAA8B;AAAA;;AAAA,aAAa,+BAAUV,OAAV,EAAkBU,MAAlB,oCAAb;AAAA,KAA9B,EAA8EZ,IAA9E,CAnCH;AAoCLa,cAAU,wBAAO,uBAAP,EAAgC;AAAA;;AAAA,aAAa,+BAAUX,OAAV,EAAkBW,QAAlB,oCAAb;AAAA,KAAhC,EAAkFb,IAAlF;AApCL,GAAP;AAsCD,C;;AA3CD;;AACA;;AACA","file":"bitswap.js","sourcesContent":["import { expose } from 'postmsg-rpc'\r\nimport { post } from 'prepost'\r\nimport { isBig, bigToJson } from '../serialization/big'\r\n\r\nexport default function (getIpfs, opts) {\r\n  return {\r\n    ledger: expose('ipfs.bitswap.ledger', (...args) => getIpfs().bitswap.ledger(...args), opts),\r\n    reprovide: expose('ipfs.bitswap.reprovide', (...args) => getIpfs().bitswap.reprovide(...args), opts),\r\n    stat: expose('ipfs.bitswap.stat', post(\r\n      (...args) => getIpfs().bitswap.stat(...args),\r\n      (stats) => {\r\n        if (stats) {\r\n          if (isBig(stats.blocksReceived)) {\r\n            stats.blocksReceived = bigToJson(stats.blocksReceived)\r\n          }\r\n\r\n          if (isBig(stats.dataReceived)) {\r\n            stats.dataReceived = bigToJson(stats.dataReceived)\r\n          }\r\n\r\n          if (isBig(stats.blocksSent)) {\r\n            stats.blocksSent = bigToJson(stats.blocksSent)\r\n          }\r\n\r\n          if (isBig(stats.dataSent)) {\r\n            stats.dataSent = bigToJson(stats.dataSent)\r\n          }\r\n\r\n          if (isBig(stats.dupBlksReceived)) {\r\n            stats.dupBlksReceived = bigToJson(stats.dupBlksReceived)\r\n          }\r\n\r\n          if (isBig(stats.dupDataReceived)) {\r\n            stats.dupDataReceived = bigToJson(stats.dupDataReceived)\r\n          }\r\n        }\r\n\r\n        return stats\r\n      }\r\n    ), opts),\r\n    unwant: expose('ipfs.bitswap.unwant', (...args) => getIpfs().bitswap.unwant(...args), opts),\r\n    wantlist: expose('ipfs.bitswap.wantlist', (...args) => getIpfs().bitswap.wantlist(...args), opts)\r\n  }\r\n}\r\n"]}