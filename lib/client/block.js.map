{"version":3,"sources":["../../src/client/block.js"],"names":["opts","put","callbackify","variadic","args","cid","blockFromJson","get","stat"],"mappings":";;;;;;kBAOe,UAAUA,IAAV,EAAgB;AAC7B,SAAO;AACLC,SAAKC,sBAAYC,QAAZ,CACH,kBACE,6BAAgB,CAAhB,CADF,EAEE,2BAAe,CAAf,CAFF,EAGE,YAAa;AAAA,wCAATC,IAAS;AAATA,YAAS;AAAA;;AACX,UAAIA,KAAK,CAAL,KAAWA,KAAK,CAAL,EAAQC,GAAvB,EAA4B;AAC1BD,aAAK,CAAL,EAAQC,GAAR,GAAc,oBAAUD,KAAK,CAAL,EAAQC,GAAlB,CAAd;AACD;;AAED,aAAOD,IAAP;AACD,KATH,EAUE,mBACE,wBAAO,gBAAP,EAAyBJ,IAAzB,CADF,EAEEM,oBAFF,CAVF,CADG,CADA;AAkBLC,SAAKL,sBAAYC,QAAZ,CACH,kBACE,6BAAgB,CAAhB,CADF,EAEE,uBAAa,CAAb,CAFF,EAGE,mBACE,wBAAO,gBAAP,EAAyBH,IAAzB,CADF,EAEEM,oBAFF,CAHF,CADG,CAlBA;AA4BLE,UAAMN,sBAAYC,QAAZ,CACJ,kBACE,6BAAgB,CAAhB,CADF,EAEE,uBAAa,CAAb,CAFF,EAGE,wBAAO,iBAAP,EAA0BH,IAA1B,CAHF,CADI;AA5BD,GAAP;AAoCD,C;;AA5CD;;AACA;;;;AACA;;AACA;;AACA;;AACA","file":"block.js","sourcesContent":["import { caller } from 'postmsg-rpc'\r\nimport callbackify from 'callbackify'\r\nimport { pre, post } from 'prepost'\r\nimport { preBlockToJson, blockFromJson } from '../serialization/block'\r\nimport { preCidToJson, cidToJson } from '../serialization/cid'\r\nimport { preBufferToJson } from '../serialization/buffer'\r\n\r\nexport default function (opts) {\r\n  return {\r\n    put: callbackify.variadic(\r\n      pre(\r\n        preBufferToJson(0),\r\n        preBlockToJson(0),\r\n        (...args) => {\r\n          if (args[1] && args[1].cid) {\r\n            args[1].cid = cidToJson(args[1].cid)\r\n          }\r\n\r\n          return args\r\n        },\r\n        post(\r\n          caller('ipfs.block.put', opts),\r\n          blockFromJson\r\n        )\r\n      )\r\n    ),\r\n    get: callbackify.variadic(\r\n      pre(\r\n        preBufferToJson(0),\r\n        preCidToJson(0),\r\n        post(\r\n          caller('ipfs.block.get', opts),\r\n          blockFromJson\r\n        )\r\n      )\r\n    ),\r\n    stat: callbackify.variadic(\r\n      pre(\r\n        preBufferToJson(0),\r\n        preCidToJson(0),\r\n        caller('ipfs.block.stat', opts)\r\n      )\r\n    )\r\n  }\r\n}\r\n"]}