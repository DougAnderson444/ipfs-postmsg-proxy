{"version":3,"sources":["../../src/client/repo.js"],"names":["opts","gc","callbackify","variadic","stat","stats","numObjects","repoSize","storageMax","version"],"mappings":";;;;;;kBAKe,UAAUA,IAAV,EAAgB;AAC7B,SAAO;AACLC,QAAIC,sBAAYC,QAAZ,CAAqB,wBAAO,cAAP,EAAuBH,IAAvB,CAArB,CADC;AAELI,UAAMF,sBAAYC,QAAZ,CACJ,mBACE,wBAAO,gBAAP,EAAyBH,IAAzB,CADF,EAEE,UAACK,KAAD,EAAW;AACT,UAAIA,KAAJ,EAAW;AACT,YAAI,oBAAUA,MAAMC,UAAhB,CAAJ,EAAiC;AAC/BD,gBAAMC,UAAN,GAAmB,sBAAYD,MAAMC,UAAlB,CAAnB;AACD;;AAED,YAAI,oBAAUD,MAAME,QAAhB,CAAJ,EAA+B;AAC7BF,gBAAME,QAAN,GAAiB,sBAAYF,MAAME,QAAlB,CAAjB;AACD;;AAED,YAAI,oBAAUF,MAAMG,UAAhB,CAAJ,EAAiC;AAC/BH,gBAAMG,UAAN,GAAmB,sBAAYH,MAAMG,UAAlB,CAAnB;AACD;AACF;;AAED,aAAOH,KAAP;AACD,KAlBH,CADI,CAFD;AAwBLI,aAAS,2BAAY,wBAAO,mBAAP,EAA4BT,IAA5B,CAAZ;AAxBJ,GAAP;AA0BD,C;;AAhCD;;AACA;;;;AACA;;AACA","file":"repo.js","sourcesContent":["import { caller } from 'postmsg-rpc'\r\nimport callbackify from 'callbackify'\r\nimport { post } from 'prepost'\r\nimport { isBigJson, bigFromJson } from '../serialization/big'\r\n\r\nexport default function (opts) {\r\n  return {\r\n    gc: callbackify.variadic(caller('ipfs.repo.gc', opts)),\r\n    stat: callbackify.variadic(\r\n      post(\r\n        caller('ipfs.repo.stat', opts),\r\n        (stats) => {\r\n          if (stats) {\r\n            if (isBigJson(stats.numObjects)) {\r\n              stats.numObjects = bigFromJson(stats.numObjects)\r\n            }\r\n\r\n            if (isBigJson(stats.repoSize)) {\r\n              stats.repoSize = bigFromJson(stats.repoSize)\r\n            }\r\n\r\n            if (isBigJson(stats.storageMax)) {\r\n              stats.storageMax = bigFromJson(stats.storageMax)\r\n            }\r\n          }\r\n\r\n          return stats\r\n        }\r\n      )\r\n    ),\r\n    version: callbackify(caller('ipfs.repo.version', opts))\r\n  }\r\n}\r\n"]}